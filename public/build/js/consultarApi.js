const cita={nombre:"",fecha:"",hora:"",servicios:[]};consultarAPI(),nombreCliente(),seleccionarFecha(),seleccionarHora(),mostrarResumen();let ultimoDivSeleccionado=null;async function consultarAPI(){try{const e="http://localhost:3000/api"+"/servicios",t=await fetch(e);mostrarServicios(await t.json())}catch(e){console.log(e)}}function mostrarServicios(e){e.forEach(e=>{const{id:t,nombre:c,precio:o}=e,n=document.createElement("P");n.classList.add("servicio__nombre"),n.textContent=c;const i=document.createElement("P");i.classList.add("servicio__precio"),i.textContent="$ "+o;const a=document.createElement("DIV");a.classList.add("servicio"),a.dataset.idServicio=t,a.onclick=function(){seleccionarServicio(e)},a.appendChild(n),a.appendChild(i),document.querySelector("#servicios").appendChild(a)})}function seleccionarServicio(e){const{id:t}=e,{servicios:c}=cita,o=document.querySelector(`[data-id-servicio="${t}"]`);c.some(e=>e.id===t)?(cita.servicios=c.filter(e=>e!==t),o.classList.remove("servicio__seleccionado"),ultimoDivSeleccionado=null,cita.servicios=[]):(ultimoDivSeleccionado&&ultimoDivSeleccionado.classList.remove("servicio__seleccionado"),cita.servicios=[e],o.classList.add("servicio__seleccionado"),ultimoDivSeleccionado=o)}function nombreCliente(){const e=document.querySelector("#nombre").value;cita.nombre=e}function seleccionarFecha(){document.querySelector("#fecha").addEventListener("input",(function(e){cita.fecha=e.target.value}))}function seleccionarHora(){document.querySelector("#hora").addEventListener("input",(function(e){cita.hora=e.target.value}))}function mostrarAlerta(e,t,c,o=!0){const n=document.querySelector(".alerta");n&&n.remove();const i=document.createElement("DIV");i.textContent=e,i.classList.add("alerta"),i.classList.add(`alerta__${t}--resumen`);document.querySelector(c).appendChild(i),o&&setTimeout(()=>{i.remove()},3e3)}function mostrarResumen(){const e=document.querySelector(".cita__resumen");for(;e.firstChild;)e.removeChild(e.firstChild);if(Object.values(cita).includes("")||0===cita.servicios.length)return void mostrarAlerta("Falta el servicio, la fecha o la hora","error",".cita__resumen",!1);const{nombre:t,fecha:c,hora:o,servicios:n}=cita,i=document.querySelector(`[value="${o}"`).textContent;n.forEach(t=>{const{id:c,precio:o,nombre:n}=t,i=document.createElement("DIV");i.classList.add("cita__contenedor");const a=document.createElement("P");a.textContent=n;const r=document.createElement("P");r.innerHTML="<span>Precio: </span> "+o,i.appendChild(a),i.appendChild(r),e.appendChild(i)});const a=document.createElement("P");a.innerHTML="<span>Nombre:</span> "+t;const r=document.createElement("P");r.innerHTML="<span>Fecha:</span> "+c;const s=document.createElement("P");s.innerHTML="<span>Hora:</span> "+i,e.appendChild(a),e.appendChild(r),e.appendChild(s)}export{mostrarResumen};